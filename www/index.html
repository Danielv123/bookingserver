<!DOCTYPE html>
<html>
<head>
<script src="moment.min.js">
</script>
<script src="jquery-3.3.1.min.js">
</script>
<style>
table#t01{
	width: 100%;
	color: white;
	border: 1px solid gray;
	border-collapse: collapse;
}
table#t01 th, tr{
	padding: 7px;
	width: 50%;
	text-align: middle;
	background-color: green;
}

</style>
<title>Ã…ssiden Booking System</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body style="margin:0px;">



<h1 style="color:white;text-align:center;background-color:gray;padding:20px;"><B>Booking for rom Anode 136<B></h1>


<input type="text" name="LoginCode" id="LoginCode" value="TestKode1">
<button onclick="loginFunction()" id="LoginButton">Login</button>
<p id="Username"></p>

<div style="background-color:white;color:white;">.</div>
<table id="t01">
	<tr>
		<th style="background-color: gray;">Tid</th>
		<th style="background-color: gray;">Status  </th>
	</tr>
	<tr class="timeSlot">
		<th id="table7301">07:30</th>
		<th id="table7302">Ledig</th>
	</tr>
	<tr class="timeSlot">
		<th>08:00</th>
		<th>Ledig</th>
	</tr>
	<tr class="timeSlot">
		<th>08:30</th>
		<th>Ledig</th>
	</tr>
	<tr class="timeSlot">
		<th>09:00</th>
		<th>Ledig</th>
	</tr>
	<tr class="timeSlot">
		<th>09:30</th>
		<th>Ledig</th>
	</tr>
	<tr class="timeSlot">
		<th>10:00</th>
		<th>Ledig</th>
	</tr>
	<tr class="timeSlot">
		<th>10:30</th>
		<th>Ledig</th>
	</tr>
	<tr class="timeSlot">
		<th>11:00</th>
		<th>Ledig</th>
	</tr>
	<tr class="timeSlot">
		<th>11:30</th>
		<th>Ledig</th>
	</tr>
	<tr class="timeSlot">
		<th>12:00</th>
		<th>Ledig</th>
	</tr>
	<tr class="timeSlot">
		<th>12:30</th>
		<th>Ledig</th>
	</tr>
	<tr class="timeSlot">
		<th>13:00</th>
		<th>Ledig</th>
	</tr>
	<tr class="timeSlot">
		<th>13:30</th>
		<th>Ledig</th>
	</tr>
	<tr class="timeSlot">
		<th>14:00</th>
		<th>Ledig</th>
	</tr>
	<tr class="timeSlot">
		<th>14:30</th>
		<th>Ledig</th>
	</tr>
	<tr class="timeSlot">
		<th>15:00</th>
		<th>Ledig</th>
	</tr>
	<tr class="timeSlot">
		<th>15:30</th>
		<th>Ledig</th>
	</tr>
	<tr class="timeSlot">
		<th>16:00</th>
		<th>Ledig</th>
	</tr>
</table>

<script>
let timeSlots = document.querySelectorAll(".timeSlot");
timeSlots.forEach(timeslot => {
	timeslot.onclick = statusChangeFunction;
});
function statusChangeFunction(){
	if (!document.getElementById("Username").innerHTML == ""){
	var settings = {
  "url": "/api/booking",
  "method": "POST",
  "timeout": 0,
  "headers": {
    "Content-Type": "application/json"
  },
  "data": JSON.stringify({name: "Daniel Vestol",
			pass: 123,
			room: "RAM",
			from: "Thu Jan 03 2019 14:36:03 GMT+0100 (Central European Standard Time)",
			to: "Thu Jan 03 2019 15:36:03 GMT+0100 (Central European Standard Time)"
		}),
};
$.ajax(settings).done(function (response) {
  console.log(response);
});
		if (this.childNodes[3].innerHTML == "Ledig") {
			this.childNodes[1].style.backgroundColor = "#eeee17";
			this.childNodes[3].style.backgroundColor = "#eeee17";
			this.childNodes[3].innerHTML = "Booket av " + document.getElementById("Username").innerHTML
		}
		else if (this.childNodes[3].innerHTML == "Booket") {
			this.childNodes[3].style.backgroundColor = "crimson";
			this.childNodes[3].style.backgroundColor = "crimson";
			this.childNodes[3].innerHTML = "Opptatt"
		}
		else if (this.childNodes[3].innerHTML == "Opptatt") {
			this.childNodes[3].style.backgroundColor = "green";
			this.childNodes[3].style.backgroundColor = "green";
			this.childNodes[3].innerHTML = "Ledig"
		}
	}
}
function loginFunction(){
	if (document.getElementById("LoginCode").value == "TestKode1"){
		document.getElementById("Username").innerHTML = "Anders";
		document.getElementById("LoginButton").style.display = "none";
		document.getElementById("LoginCode").style.display = "none";
	}
}
var settings = {
  "url": "/api/rooms",
  "method": "GET",
  "timeout": 0,
};
$.ajax(settings).done(function (response) {
  console.log(response);
});
</script>
</body>

</html>